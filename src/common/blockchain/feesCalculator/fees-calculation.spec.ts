import {FirstFeesFormula} from "./FirstFeesFormula";
import {Microblock} from "../microblock/Microblock";
import {Utils} from "../../utils/utils";
import {SignatureSchemeId} from "../../crypto/signature/SignatureSchemeId";
import {CMTSToken} from "../../economics/currencies/token";

describe('FirstFeesCalculation', () => {
    const mb1 = Microblock.loadFromSerializedMicroblock(
        Utils.binaryFromHexa("B9000266686561646572B9000A6B6D61676963537472696E6764434D54536F70726F746F636F6C56657273696F6E016E6D6963726F626C6F636B547970650166686569676874026C70726576696F757348617368582048FBEA199C15F20E9F7AD52F66005281D35B90C89D6A0950D0F7D0D33A5D929A6974696D657374616D701A695D3AB663676173006867617350726963651A000186A068626F6479486173685820A56AD9C0C651D6F4DD3388CCB8CC98342AE704F765A31DA373615B322DC7AB70706665657350617965724163636F756E745820000000000000000000000000000000000000000000000000000000000000000064626F6479B900016873656374696F6E7381B90005647479706514676163636F756E745820783D94EE7E0079BB1629881C75C0D0E56743B3F7961CBE6F0330872EA5F849F266616D6F756E741A000186A06F7075626C69635265666572656E6365685472616E7366657270707269766174655265666572656E636560")
    )
    mb1.setGasPrice(CMTSToken.zero()) // the microblock already contains an invalid gas price (too high: 1 CMTS)
    expect(mb1).toBeDefined();

    it('should calculate fees', async () => {
        const formula = new FirstFeesFormula();
        const fees = await formula.computeFees(SignatureSchemeId.SECP256K1, mb1);
        console.log(fees.toString())
    })
})